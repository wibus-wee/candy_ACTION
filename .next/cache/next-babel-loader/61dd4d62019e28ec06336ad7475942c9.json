{"ast":null,"code":"var __jsx = React.createElement;\nimport { useStore } from 'common/store';\nimport { Error } from 'components/Error';\nimport Markdown from 'components/MD-render';\nimport OutdateNotice from 'components/Outdate';\nimport dayjs from 'dayjs';\nimport { ArticleLayout } from 'layouts/ArticleLayout';\nimport { useRouter } from 'next/router';\nimport React, { useEffect, useState } from 'react';\nimport { observer } from 'utils/mobx';\nimport { getSummaryFromMd } from 'utils/utils';\nimport { Copyright } from '../../components/Copyright';\nimport { Seo } from '../../components/SEO';\nimport configs from '../../configs';\nexport var __N_SSG = true;\nexport var PostView = function PostView(props) {\n  var content = props.content,\n      title = props.title,\n      slug = props.slug;\n\n  var _useState = useState({}),\n      copyrightInfo = _useState[0],\n      setCopyright = _useState[1];\n\n  var description = getSummaryFromMd(props.content).slice(0, 150);\n  useEffect(function () {\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth'\n    });\n  }, [props]);\n\n  var _useStore = useStore(),\n      appStore = _useStore.appStore;\n\n  useEffect(function () {\n    appStore.headerNav = {\n      title: props.title,\n      meta: '文章',\n      show: true\n    };\n    return function () {\n      appStore.headerNav.show = false;\n    };\n  }, [appStore, props.title]);\n  useEffect(function () {\n    setCopyright({\n      date: dayjs(props.modified).format('YYYY年MM月DD日 H:mm'),\n      title: title,\n      link: new URL(location.pathname, configs.url).toString()\n    });\n  }, [props, title]);\n  var router = useRouter();\n\n  if (!router.isFallback && !slug) {\n    return __jsx(Error, {\n      statusCode: 404\n    });\n  }\n\n  return __jsx(ArticleLayout, {\n    title: title\n  }, __jsx(Seo, {\n    title: props.title,\n    description: description,\n    openGraph: {\n      type: 'article',\n      article: {\n        publishedTime: props.created.toString(),\n        modifiedTime: props.modified.toString()\n      }\n    }\n  }), __jsx(OutdateNotice, {\n    time: props.modified\n  }), __jsx(Markdown, {\n    value: content,\n    escapeHtml: false,\n    showTOC: true\n  }), __jsx(Copyright, copyrightInfo));\n};\nexport default observer(PostView);","map":null,"metadata":{},"sourceType":"module"}