{"ast":null,"code":"/*\n * @Author: Innei\n * @Date: 2020-09-05 12:56:33\n * @LastEditTime: 2020-09-05 13:31:01\n * @LastEditors: Innei\n * @FilePath: /candy/core/utils.ts\n * @Coding with Love\n */\nimport * as fs from 'fs'; // @ts-ignore\n\nimport * as parser from 'markdown-yaml-metadata-parser';\nimport { basename } from 'path';\nexport const readMarkdownFile = path => {\n  const stat = fs.statSync(path);\n\n  if (!/\\.md$/.test(path) || stat.isDirectory()) {\n    throw new ReferenceError('ext must be .md');\n  }\n\n  const filenameWithoutExt = basename(path).replace(/\\.md$/, '').replace(' ', '-');\n  const raw = fs.readFileSync(path, {\n    encoding: 'utf-8'\n  }); // stat.\n\n  const {\n    metadata = {},\n    content\n  } = parser(raw);\n  const created = new Date(metadata.created || metadata.date);\n  const modified = new Date(metadata.modified || metadata.updated);\n  return {\n    stat,\n    raw,\n    created,\n    modified,\n    content,\n    text: content,\n    metadata,\n    title: metadata.title || filenameWithoutExt\n  };\n};","map":null,"metadata":{},"sourceType":"module"}