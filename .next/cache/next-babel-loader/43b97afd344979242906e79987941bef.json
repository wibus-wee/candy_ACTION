{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _wrapNativeSuper from \"@babel/runtime/helpers/esm/wrapNativeSuper\";\nimport _message from \"antd/lib/message\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport 'assets/styles/main.scss';\nimport { useStore } from 'common/store';\nimport Loader from 'components/Loader';\nimport configs from 'configs';\nimport { BasicLayout } from 'layouts/BasicLayout';\nimport throttle from 'lodash/throttle';\nimport { LogoJsonLd, NextSeo, SocialProfileJsonLd } from 'next-seo';\nimport { Router } from 'next/router';\nimport 'normalize.css';\nimport React, { useCallback, useState } from 'react';\nimport useMount from 'react-use/lib/useMount';\nimport useUnmount from 'react-use/lib/useUnmount';\nimport { UAParser } from 'ua-parser-js';\nimport Package from '../package.json';\nvar _currentY = 0;\n\nvar Content = function Content(props) {\n  var _useState = useState(true),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var _useStore = useStore(),\n      app = _useStore.appStore;\n\n  useMount(function () {\n    printToConsole();\n    setLoading(false);\n    app.setLoading(false);\n    checkBrowser();\n    registerRouterEvents();\n    registerEvent();\n    initColorMode();\n    setPages();\n  });\n  var setPages = useCallback(function () {\n    fetch('/data/pages.json').then(function (res) {\n      res.json().then(function (json) {\n        var pages = Object.values(json);\n        app.setPage(pages.map(function (i) {\n          return {\n            created: i.created,\n            modified: i.modified,\n            order: i.order,\n            slug: i.slug,\n            title: i.title\n          };\n        }));\n      });\n    });\n  }, []);\n  var registerEvent = useCallback(function () {\n    var resizeHandler = throttle(function () {\n      app.updateViewport();\n    }, 300);\n    window.onresize = resizeHandler;\n    app.updateViewport();\n\n    if (typeof document !== 'undefined') {\n      document.addEventListener('scroll', handleScroll);\n    }\n  }, []);\n  var handleScroll = useCallback(throttle(function () {\n    var currentY = document.documentElement.scrollTop;\n    var direction = _currentY >= currentY ? 'up' : 'down';\n    app.updatePosition(direction);\n    _currentY = currentY;\n  }, 13), []);\n  var checkBrowser = useCallback(function () {\n    var parser = new UAParser(window.navigator.userAgent);\n    var browser = parser.getBrowser();\n\n    var isOld = function () {\n      if (browser.name === 'IE') {\n        alert('欧尼酱, 乃真的要使用 IE 浏览器吗, 不如换个 Chrome 好不好嘛（o´ﾟ□ﾟ`o）');\n        location.href = 'https://www.google.com/chrome/';\n        return true;\n      } // check build-in methods\n\n\n      var ObjectMethods = ['fromEntries', 'entries'];\n      var ArrayMethods = ['flat'];\n\n      if (!window.Reflect || !(ObjectMethods.every(function (m) {\n        return Reflect.has(Object, m);\n      }) && ArrayMethods.every(function (m) {\n        return Reflect.has(Array.prototype, m);\n      })) || !window.requestAnimationFrame || !window.Proxy) {\n        return true;\n      }\n\n      return false;\n    }();\n\n    if (isOld) {\n      _message.warn('欧尼酱, 乃的浏览器太老了, 更新一下啦（o´ﾟ□ﾟ`o）');\n\n      var BrowserTooOldError = /*#__PURE__*/function (_Error) {\n        _inherits(BrowserTooOldError, _Error);\n\n        var _super = _createSuper(BrowserTooOldError);\n\n        function BrowserTooOldError() {\n          _classCallCheck(this, BrowserTooOldError);\n\n          var _parser$getOS = parser.getOS(),\n              osName = _parser$getOS.name,\n              osVersion = _parser$getOS.version;\n\n          return _super.call(this, \"User browser(\".concat(browser.name, \" \").concat(browser.version, \") is too old. OS: \").concat(osName, \"/\").concat(osVersion));\n        }\n\n        return BrowserTooOldError;\n      }( /*#__PURE__*/_wrapNativeSuper(Error));\n\n      throw new BrowserTooOldError();\n    }\n  }, []);\n  useUnmount(function () {\n    window.onresize = null;\n    document.removeEventListener('scroll', handleScroll);\n  });\n  var initColorMode = useCallback(function () {\n    var getColormode = function getColormode(e) {\n      app.colorMode = e.matches ? 'dark' : 'light';\n      return app.colorMode;\n    };\n\n    app.colorMode = getColormode(window.matchMedia('(prefers-color-scheme: dark)'));\n\n    try {\n      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function (e) {\n        if (app.autoToggleColorMode) {\n          getColormode(e);\n        }\n      }); // eslint-disable-next-line no-empty\n    } catch (_unused) {}\n  }, []);\n  var registerRouterEvents = useCallback(function () {\n    Router.events.on('routeChangeStart', function (url) {\n      setTimeout(function () {\n        if (app.loading) {\n          setLoading(true);\n        }\n      }, 500);\n      app.setLoading(true);\n    });\n    Router.events.on('routeChangeComplete', function () {\n      // window.scrollTo({ left: 0, top: 0, behavior: 'smooth' })\n      setLoading(false);\n      app.setLoading(false);\n    });\n    Router.events.on('routeChangeError', function () {\n      // window.scrollTo({ left: 0, top: 0, behavior: 'smooth' })\n      setLoading(false);\n      app.setLoading(false);\n\n      _message.error('出现了未知错误, 刷新试试?');\n    });\n  }, []);\n  return __jsx(React.Fragment, null, __jsx(NextSeo, {\n    title: configs.title + ' · ' + configs.description,\n    description: configs.description\n  }), __jsx(LogoJsonLd, {\n    logo: new URL('/custom-icon.svg', configs.url).toString(),\n    url: configs.url\n  }), __jsx(SocialProfileJsonLd, {\n    type: 'Person',\n    name: configs.author || '',\n    url: configs.url,\n    sameAs: configs.social.map(function (_ref) {\n      var url = _ref.url;\n      return url;\n    })\n  }), __jsx(\"div\", {\n    id: \"next\",\n    style: {\n      display: loading ? 'none' : ''\n    }\n  }, props.children), __jsx(Loader, null));\n};\n\nexport default function MyApp(ctx) {\n  var Component = ctx.Component,\n      pageProps = ctx.pageProps,\n      err = ctx.err;\n  return __jsx(Content, null, __jsx(BasicLayout, null, __jsx(Component, _extends({}, pageProps, {\n    err: err\n  }))));\n}\n\nfunction printToConsole() {\n  try {\n    var text = \"\\n    This Blog Powered By Mix Space.\\n    --------\\n    Stay hungry. Stay foolish. --Steve Jobs\\n    \";\n    document.documentElement.prepend(document.createComment(text)); // eslint-disable-next-line no-empty\n  } catch (_unused2) {} finally {\n    console.log('%c Kico Style %c https://paugram.com ', 'color: #fff; margin: 1em 0; padding: 5px 0; background: #3498db;', 'margin: 1em 0; padding: 5px 0; background: #efefef;');\n    console.log(\"%c Candy \".concat(Package.version, \" %c https://innei.ren \"), 'color: #fff; margin: 1em 0; padding: 5px 0; background: #2980b9;', 'margin: 1em 0; padding: 5px 0; background: #efefef;');\n  }\n}","map":null,"metadata":{},"sourceType":"module"}