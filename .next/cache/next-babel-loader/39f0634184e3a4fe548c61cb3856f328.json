{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { faSmile, faSun } from '@fortawesome/free-regular-svg-icons';\nimport { faClock, faUser } from '@fortawesome/free-solid-svg-icons';\nimport { useStore } from 'common/store';\nimport Action from 'components/Action';\nimport Markdown from 'components/MD-render';\nimport configs from 'configs';\nimport { NoteLayout } from 'layouts/NoteLayout';\nimport { useRouter } from 'next/router';\nimport { useEffect, useState } from 'react';\nimport { observer } from 'utils/mobx';\nimport { parseDate, relativeTimeFromNow } from 'utils/time';\nimport { Seo } from '../../components/SEO';\nimport { getSummaryFromMd } from '../../utils';\nimport { Error } from 'components/Error';\n\nvar renderLines = (_ref) => {\n  var {\n    value\n  } = _ref;\n  return __jsx(\"span\", {\n    className: \"indent\"\n  }, value);\n};\n\nvar NoteView = observer(props => {\n  var {\n    content: text,\n    created,\n    modified,\n    nid,\n    title,\n    mood,\n    weather,\n    hasNext,\n    hasPrev\n  } = props;\n  var {\n    appStore\n  } = useStore();\n  var router = useRouter();\n\n  if (!router.isFallback && !props.nid) {\n    return __jsx(Error, {\n      statusCode: 404\n    });\n  }\n\n  var {\n    0: tips,\n    1: setTips\n  } = useState(\"\");\n  var {\n    description,\n    wordCount\n  } = getSummaryFromMd(text, {\n    count: true\n  });\n  useEffect(() => {\n    try {\n      setTips(\"\\u521B\\u5EFA\\u4E8E \".concat(parseDate(created, 'YYYY-MM-DD dddd'), \", \\u4FEE\\u6539\\u4E8E \").concat(parseDate(modified, 'YYYY-MM-DD dddd'), \", \\u5168\\u6587\\u5B57\\u6570: \").concat(wordCount)); // eslint-disable-next-line no-empty\n    } catch (_unused) {}\n  }, [text, wordCount, created, modified]);\n  useEffect(() => {\n    if (document.documentElement.scrollTop > 50) {\n      document.documentElement.scrollTop = 50;\n    }\n\n    setTimeout(() => {\n      window.scroll({\n        top: 0,\n        left: 0,\n        behavior: 'smooth'\n      });\n    }, 10);\n  }, [props]);\n  var actions = {\n    informs: []\n  };\n  {\n    if (weather) {\n      actions.informs.push({\n        name: weather,\n        icon: faSun\n      });\n    }\n\n    if (mood) {\n      actions.informs.push({\n        name: mood,\n        icon: faSmile\n      });\n    }\n\n    actions.informs.push({\n      name: configs.author,\n      icon: faUser\n    }, {\n      name: relativeTimeFromNow(created),\n      icon: faClock\n    });\n  }\n  useEffect(() => {\n    appStore.headerNav = {\n      title,\n      meta: '日记',\n      show: true\n    };\n    return () => {\n      appStore.headerNav.show = false;\n    };\n  }, [appStore, title]);\n  return __jsx(React.Fragment, null, __jsx(Seo, {\n    title: title,\n    description,\n    openGraph: {\n      title,\n      type: 'article',\n      description,\n      article: {\n        publishedTime: created,\n        modifiedTime: modified,\n        tags: ['Note of Life']\n      }\n    }\n  }), __jsx(NoteLayout, {\n    title: title,\n    date: new Date(created),\n    tips: tips\n  }, __jsx(Markdown, {\n    value: text,\n    escapeHtml: false,\n    renderers: {\n      text: renderLines\n    }\n  }), __jsx(Action, actions), (!!hasNext || !!hasPrev) && __jsx(\"section\", {\n    className: \"paul-more\"\n  }, !!hasNext && __jsx(\"button\", {\n    className: \"btn green\",\n    onClick: () => {\n      router.push('/notes/[id]', \"/notes/\".concat(nid + 1));\n    }\n  }, \"\\u540E\\u4E00\\u7BC7\"), __jsx(\"button\", {\n    className: \"btn yellow\",\n    onClick: () => {\n      window.scrollTo({\n        left: 0,\n        top: 0,\n        behavior: 'smooth'\n      });\n      router.push('/timeline?type=note');\n    }\n  }, \"\\u65F6\\u95F4\\u7EBF\"), !!hasPrev && __jsx(\"button\", {\n    className: \"btn green\",\n    onClick: () => {\n      router.push('/notes/[id]', \"/notes/\".concat(nid - 1));\n    }\n  }, \"\\u524D\\u4E00\\u7BC7\"))));\n});\nexport var __N_SSG = true;\nexport default NoteView;","map":null,"metadata":{},"sourceType":"module"}