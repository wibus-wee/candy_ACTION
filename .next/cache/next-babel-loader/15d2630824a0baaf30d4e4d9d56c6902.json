{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _initializerDefineProperty from \"@babel/runtime/helpers/esm/initializerDefineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _applyDecoratedDescriptor from \"@babel/runtime/helpers/esm/applyDecoratedDescriptor\";\nimport _initializerWarningHelper from \"@babel/runtime/helpers/esm/initializerWarningHelper\";\n\nvar _class, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _descriptor6, _descriptor7, _descriptor8, _temp;\n\n/*\n * @Author: Innei\n * @Date: 2020-09-02 14:00:52\n * @LastEditTime: 2020-09-05 15:56:38\n * @LastEditors: Innei\n * @FilePath: /candy/common/store/app.ts\n * @Coding with Love\n */\nimport configs from 'configs';\nimport { action, computed, observable } from 'mobx';\nvar AppStore = (_class = (_temp = /*#__PURE__*/function () {\n  function AppStore() {\n    _classCallCheck(this, AppStore);\n\n    _initializerDefineProperty(this, \"menu\", _descriptor, this);\n\n    _initializerDefineProperty(this, \"viewport\", _descriptor2, this);\n\n    _initializerDefineProperty(this, \"loading\", _descriptor3, this);\n\n    _initializerDefineProperty(this, \"position\", _descriptor4, this);\n\n    _initializerDefineProperty(this, \"scrollDirection\", _descriptor5, this);\n\n    _initializerDefineProperty(this, \"autoToggleColorMode\", _descriptor6, this);\n\n    _initializerDefineProperty(this, \"colorMode\", _descriptor7, this);\n\n    _initializerDefineProperty(this, \"headerNav\", _descriptor8, this);\n  }\n\n  _createClass(AppStore, [{\n    key: \"updatePosition\",\n    value: function updatePosition(direction) {\n      if (typeof document !== 'undefined') {\n        this.position = document.documentElement.scrollTop;\n        this.scrollDirection = direction;\n      }\n    }\n  }, {\n    key: \"toggleLoading\",\n    value: function toggleLoading() {\n      document.body.classList.toggle('loading');\n      this.loading = !this.loading;\n    }\n  }, {\n    key: \"setLoading\",\n    value: function setLoading(state) {\n      state ? document.body.classList.add('loading') : document.body.classList.remove('loading');\n      this.loading = state;\n    }\n  }, {\n    key: \"setMenu\",\n    value: function setMenu(menu) {\n      this.menu = menu;\n    }\n  }, {\n    key: \"setPage\",\n    value: function setPage(pages) {\n      var _ref;\n\n      var homeMenu = this.menu.find(function (menu) {\n        return menu.type === 'Home';\n      });\n      var models = pages.map(function (page) {\n        var title = page.title,\n            slug = page.slug;\n        return {\n          title: title,\n          path: '/[page]',\n          as: '/' + slug,\n          type: 'Page'\n        };\n      });\n      homeMenu === null || homeMenu === void 0 ? void 0 : (_ref = homeMenu.subMenu).push.apply(_ref, _toConsumableArray(models));\n    }\n  }, {\n    key: \"updateViewport\",\n    value: function updateViewport() {\n      var innerHeight = window.innerHeight;\n      var width = document.documentElement.getBoundingClientRect().width;\n      var _this$viewport = this.viewport,\n          hpad = _this$viewport.hpad,\n          pad = _this$viewport.pad,\n          mobile = _this$viewport.mobile; // 忽略移动端浏览器 上下滚动 导致的视图大小变化\n\n      if (this.viewport.h && // chrome mobile delta == 56\n      Math.abs(innerHeight - this.viewport.h) < 80 && width === this.viewport.w && (hpad || pad || mobile)) {\n        return;\n      }\n\n      this.viewport = {\n        w: width,\n        h: innerHeight,\n        mobile: window.screen.width <= 568 || window.innerWidth <= 568,\n        pad: window.innerWidth <= 768 && window.innerWidth > 568,\n        hpad: window.innerWidth <= 1024 && window.innerWidth > 768,\n        wider: window.innerWidth > 1024 && window.innerWidth < 1920,\n        widest: window.innerWidth >= 1920\n      };\n    }\n  }, {\n    key: \"isOverflow\",\n    get: function get() {\n      if (false) {\n        return false;\n      }\n\n      return this.position > window.innerHeight || this.position > screen.height;\n    }\n  }, {\n    key: \"isPadOrMobile\",\n    get: function get() {\n      return this.viewport.pad || this.viewport.mobile;\n    }\n  }]);\n\n  return AppStore;\n}(), _temp), (_descriptor = _applyDecoratedDescriptor(_class.prototype, \"menu\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return configs.menu;\n  }\n}), _descriptor2 = _applyDecoratedDescriptor(_class.prototype, \"viewport\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return {};\n  }\n}), _descriptor3 = _applyDecoratedDescriptor(_class.prototype, \"loading\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return true;\n  }\n}), _descriptor4 = _applyDecoratedDescriptor(_class.prototype, \"position\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 0;\n  }\n}), _descriptor5 = _applyDecoratedDescriptor(_class.prototype, \"scrollDirection\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n}), _descriptor6 = _applyDecoratedDescriptor(_class.prototype, \"autoToggleColorMode\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return true;\n  }\n}), _descriptor7 = _applyDecoratedDescriptor(_class.prototype, \"colorMode\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 'light';\n  }\n}), _descriptor8 = _applyDecoratedDescriptor(_class.prototype, \"headerNav\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return {\n      title: '',\n      meta: '',\n      show: false\n    };\n  }\n}), _applyDecoratedDescriptor(_class.prototype, \"updatePosition\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"updatePosition\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"isOverflow\", [computed], Object.getOwnPropertyDescriptor(_class.prototype, \"isOverflow\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"toggleLoading\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"toggleLoading\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"setLoading\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"setLoading\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"setMenu\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"setMenu\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"setPage\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"setPage\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"updateViewport\", [action], Object.getOwnPropertyDescriptor(_class.prototype, \"updateViewport\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"isPadOrMobile\", [computed], Object.getOwnPropertyDescriptor(_class.prototype, \"isPadOrMobile\"), _class.prototype)), _class);\nexport { AppStore as default };","map":null,"metadata":{},"sourceType":"module"}